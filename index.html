<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Pomop - An extended Pomodoro timer with custom settings, tasks, and themes">
  <title>Pomop - Focus Timer</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css">

  <!-- Favicon -->
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üí†</text></svg>">
</head>

<body>
  <!-- Liquid Background -->
  <div class="liquid-background">
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>
  </div>

  <!-- App Container -->
  <div class="app-container">

    <!-- Header -->
    <header class="app-header">
      <div class="app-logo">Pomop</div>
      <div class="header-controls">
        <button id="settingsBtn" class="btn btn-icon" title="Settings" aria-label="Open settings">
          ‚öôÔ∏è
        </button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">

      <!-- Timer Section (no card/container, full-viewport feel) -->
      <section class="timer-section">
        <div class="cycle-indicator" id="cycleIndicator">
          Pomodoro 1 of 4
        </div>

        <div class="progress-dots" id="progressDots">
          <!-- Progress dots will be populated by JavaScript -->
        </div>

        <div class="phase-label" id="phaseLabel">
          Focus Time
        </div>

        <div class="timer-display">
          <div class="timer-glow-pulse"></div>
          <svg class="timer-circle" viewBox="0 0 320 320">
            <circle class="timer-circle-bg" cx="160" cy="160" r="155" />
            <circle id="timerProgress" class="timer-circle-progress" cx="160" cy="160" r="155" stroke-dasharray="973.9"
              stroke-dashoffset="0" />
          </svg>
          <div class="timer-time" id="timerDisplay"></div>
        </div>

        <div class="controls">
          <button id="resetBtn" class="btn btn-secondary btn-icon" title="Reset" aria-label="Reset timer">
            ‚ü≤
          </button>
          <button id="startBtn" class="btn btn-primary" aria-label="Start timer">
            ‚ñ∂ Start
          </button>
          <button id="pauseBtn" class="btn btn-primary hidden" aria-label="Pause timer">
            ‚è∏ Pause
          </button>
          <button id="skipBtn" class="btn btn-secondary btn-icon" title="Skip" aria-label="Skip to next phase">
            ‚è≠
          </button>
        </div>
      </section>

      <!-- Music Player Toggle Button -->
      <button id="musicPlayerToggle" class="music-player-toggle" title="Toggle Music Player">
        ‚Äπ
      </button>

      <!-- Music Player Panel -->
      <aside class="music-player-panel glass-card hidden">
        <div class="music-player-header">
          <h3 class="music-player-title">Music Player</h3>
          <label for="musicUpload" class="btn btn-secondary btn-sm">
            + Add Music
          </label>
          <input type="file" id="musicUpload" accept=".mp3,.wav,.ogg,audio/*" multiple style="display: none;">
        </div>

        <!-- Now Playing -->
        <div class="now-playing" id="nowPlaying">
          <div class="now-playing-info">
            <div class="track-name" id="currentTrackName">No track playing</div>
            <div class="track-time">
              <span id="currentTime">0:00</span> / <span id="totalTime">0:00</span>
            </div>
          </div>

          <!-- Progress Bar -->
          <div class="music-progress-container">
            <input type="range" id="musicProgress" class="music-progress" min="0" max="100" value="0">
          </div>
        </div>

        <!-- Playback Controls -->
        <div class="music-controls">
          <button id="shuffleBtn" class="btn btn-icon music-btn" title="Shuffle">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5" />
            </svg>
          </button>
          <button id="previousBtn" class="btn btn-icon music-btn" title="Previous">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 20L9 12l10-8v16zM5 19V5" />
            </svg>
          </button>
          <button id="playPauseBtn" class="btn btn-primary music-btn-main" title="Play">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
              <path d="M8 5v14l11-7z" />
            </svg>
          </button>
          <button id="nextBtn" class="btn btn-icon music-btn" title="Next">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 4l10 8-10 8V4zM19 5v14" />
            </svg>
          </button>
          <button id="repeatBtn" class="btn btn-icon music-btn" title="Repeat Off" data-repeat="none">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 1l4 4-4 4M3 11V9a4 4 0 0 1 4-4h14M7 23l-4-4 4-4M21 13v2a4 4 0 0 1-4 4H3" />
            </svg>
          </button>
        </div>

        <!-- Volume Control -->
        <div class="music-volume">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M11 5L6 9H2v6h4l5 4V5zM19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07" />
          </svg>
          <input type="range" id="musicVolume" class="music-volume-slider" min="0" max="100" value="70">
          <span id="musicVolumeValue">70%</span>
        </div>

        <!-- Playlist -->
        <div class="music-playlist-header">
          <span>Playlist</span>
          <button id="clearPlaylistBtn" class="btn btn-secondary btn-sm">Clear All</button>
        </div>
        <div class="music-playlist" id="musicPlaylist">
          <div class="playlist-empty">No tracks in playlist</div>
        </div>
      </aside>

      <!-- Settings Overlay (sits on top of timer, no layout shift) -->
      <div id="settingsPanel" class="settings-overlay hidden">
        <section class="settings-panel glass-card">
          <div class="settings-header">
            <h2 class="settings-title">Settings</h2>
            <button id="closeSettingsBtn" class="btn btn-icon settings-close" aria-label="Close settings">‚úï</button>
          </div>

          <!-- Timer Duration Settings -->
          <div class="setting-group">
            <label class="setting-label">
              Focus Duration: <span class="setting-value" id="focusValue">25</span> min
            </label>
            <input type="range" id="focusDuration" class="setting-range" min="1" max="60" value="25">
          </div>

          <div class="setting-group">
            <label class="setting-label">
              Short Break: <span class="setting-value" id="shortBreakValue">5</span> min
            </label>
            <input type="range" id="shortBreakDuration" class="setting-range" min="1" max="30" value="5">
          </div>

          <div class="setting-group">
            <label class="setting-label">
              Long Break: <span class="setting-value" id="longBreakValue">15</span> min
            </label>
            <input type="range" id="longBreakDuration" class="setting-range" min="5" max="60" value="15">
          </div>

          <div class="setting-group">
            <label class="setting-label">
              Pomodoros per Cycle: <span class="setting-value" id="cycleValue">4</span>
            </label>
            <input type="range" id="cycleLength" class="setting-range" min="2" max="8" value="4">
          </div>



          <!-- Theme Settings -->
          <div class="setting-group">
            <label class="setting-label">Theme</label>
            <div class="theme-grid">
              <button class="theme-option active" data-theme="ocean">Ocean</button>
              <button class="theme-option" data-theme="forest">Forest</button>
              <button class="theme-option" data-theme="sunset">Sunset</button>
              <button class="theme-option" data-theme="lavender">Lavender</button>
              <button class="theme-option" data-theme="minimal">Minimal</button>
            </div>
          </div>



          <!-- Audio Settings -->
          <div class="setting-group">
            <label class="setting-label">
              Volume: <span class="setting-value" id="volumeValue">70</span>%
            </label>
            <input type="range" id="volume" class="setting-range" min="0" max="100" value="70">
          </div>

          <div class="setting-group">
            <label class="setting-label">Timer End Sound</label>
            <div class="audio-options">
              <div class="audio-option active" data-sound="bell">
                <span>üîî Bell</span>
                <button class="audio-preview" data-preview="bell">‚ñ∂</button>
              </div>
              <div class="audio-option" data-sound="chime">
                <span>üéµ Chime</span>
                <button class="audio-preview" data-preview="chime">‚ñ∂</button>
              </div>
              <div class="audio-option" data-sound="gong">
                <span>ü•Å Gong</span>
                <button class="audio-preview" data-preview="gong">‚ñ∂</button>
              </div>
              <div class="audio-option" data-sound="ping">
                <span>üîä Ping</span>
                <button class="audio-preview" data-preview="ping">‚ñ∂</button>
              </div>
            </div>

            <!-- Custom Sounds Section -->
            <div class="custom-sounds-section">
              <div class="custom-sounds-header">
                <label class="setting-label">Custom Sounds</label>
                <label for="customSoundUpload" class="btn btn-secondary btn-sm">
                  üìÅ Upload Sound
                </label>
                <input type="file" id="customSoundUpload" accept=".mp3,.wav,.ogg,audio/*" style="display: none;">
              </div>
              <div id="customSoundsList" class="custom-sounds-list">
                <!-- Custom sounds will be populated here -->
              </div>
            </div>
          </div>

          <!-- Notifications -->
          <div class="setting-group">
            <label class="checkbox-wrapper">
              <input type="checkbox" id="notifications" class="checkbox" checked>
              <span>Enable browser notifications</span>
            </label>
          </div>
        </section>
      </div>

    </main>

  </div>

  <!-- Task Selection Modal -->
  <div id="taskModal" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title">üéâ Time for a Long Break!</h2>
        <button id="closeTaskModal" class="modal-close" aria-label="Close">‚úï</button>
      </div>

      <p class="text-center mb-lg" style="color: var(--text-secondary);">
        Choose an activity to refresh yourself
      </p>

      <div class="tasks-grid" id="tasksGrid">
        <!-- Tasks will be populated by JavaScript -->
      </div>

      <div class="text-center mb-lg">
        <button id="randomTaskBtn" class="btn btn-primary">
          üé≤ Surprise Me!
        </button>
      </div>

      <div class="custom-tasks">
        <h3 class="mb-md" style="color: var(--text-primary);">Custom Activities</h3>
        <div class="task-input-group">
          <input type="text" id="customTaskInput" class="task-input" placeholder="Add your own activity..."
            maxlength="30">
          <button id="addTaskBtn" class="btn btn-secondary">+ Add</button>
        </div>
        <div id="customTasksList">
          <!-- Custom tasks will be populated here -->
        </div>
      </div>

      <div class="text-center mt-auto">
        <button id="startBreakBtn" class="btn btn-primary">
          Start Long Break
        </button>
      </div>
    </div>
  </div>

  <!-- Main App Script -->
  <script type="module" src="app.js"></script>
</body>

</html>